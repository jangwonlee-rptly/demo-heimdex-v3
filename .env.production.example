# Heimdex Production Environment Variables
# Copy this file and fill in your production values

# ============================================
# SUPABASE CONFIGURATION
# ============================================
# Get these from: Supabase Dashboard → Project Settings → API
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_JWT_SECRET=your-jwt-secret-here

# Get this from: Supabase Dashboard → Project Settings → Database
# Format: postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres
DATABASE_URL=postgresql://postgres.xxxxx:password@aws-0-us-west-1.pooler.supabase.com:6543/postgres

# ============================================
# OPENAI CONFIGURATION
# ============================================
# Get this from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ============================================
# REDIS CONFIGURATION
# ============================================
# If using Railway/Render managed Redis, this will be auto-injected
# Format: redis://default:password@host:port
REDIS_URL=redis://default:password@redis-host:6379

# ============================================
# API CONFIGURATION
# ============================================
# IMPORTANT: Set to your actual frontend domain(s), comma-separated
# NO TRAILING SLASHES!
# Examples:
#   Single domain: https://app.heimdex.com
#   Multiple domains: https://app.heimdex.com,https://www.heimdex.com
API_CORS_ORIGINS=https://your-frontend-domain.com

# ============================================
# FRONTEND CONFIGURATION
# ============================================
# These MUST be set as build arguments in your deployment platform
# Railway: Settings → Build → Docker Build Arguments
# Render: Environment → Add as environment variables

# Same as SUPABASE_URL above
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co

# Same as SUPABASE_ANON_KEY above
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Your API service URL (from deployment platform)
# Railway example: https://api-production-abc123.up.railway.app
# Render example: https://heimdex-api.onrender.com
# NO TRAILING SLASH!
NEXT_PUBLIC_API_URL=https://your-api-domain.com

# ============================================
# WORKER CONFIGURATION
# ============================================
# Temp directory for video processing
# Default is fine for most deployments
TEMP_DIR=/tmp/heimdex

# ============================================
# DEPLOYMENT PLATFORM NOTES
# ============================================

# RAILWAY:
# - Redis: Use Railway's managed Redis, reference as ${{Redis.REDIS_URL}}
# - Services will auto-discover each other via Railway's private network
# - Set NEXT_PUBLIC_* vars in both environment AND build arguments

# RENDER:
# - Create Redis instance first, then reference its internal URL
# - Use environment groups for shared variables
# - Set NEXT_PUBLIC_* vars as environment variables

# DIGITALOCEAN:
# - Use managed Redis database
# - Configure each component separately
# - Set build-time variables in component settings

# ============================================
# SECURITY CHECKLIST
# ============================================
# Before deploying, verify:
# [ ] All placeholder values replaced with real credentials
# [ ] CORS set to actual frontend domain (not localhost)
# [ ] API_URL set to actual API domain (not localhost)
# [ ] Service role key kept SECRET (never exposed to frontend)
# [ ] JWT secret kept SECRET
# [ ] Database password is strong
# [ ] OpenAI API key is valid and has credits
# [ ] This file is NOT committed to git (.gitignore)

# ============================================
# COST OPTIMIZATION NOTES
# ============================================
# OpenAI API costs (biggest expense):
# - Whisper: ~$0.006 per minute of audio
# - GPT-4o-mini (vision): ~$0.00015 per image
# - text-embedding-3-small: ~$0.00002 per 1K tokens
#
# For a 10-minute video with 5 scenes:
# - Whisper: ~$0.06
# - Vision (5 images): ~$0.00075
# - Embeddings: ~$0.001
# Total: ~$0.06 per video
#
# Budget recommendation: $20-50/month for moderate usage

# ============================================
# MONITORING RECOMMENDATIONS
# ============================================
# Set up alerts for:
# - API response time > 500ms
# - Worker job failures
# - Database connection errors
# - OpenAI API errors
# - Redis connection errors
# - Disk space (if using local storage)
#
# Recommended tools:
# - Sentry: Error tracking (free tier)
# - Better Uptime: Uptime monitoring (free tier)
# - Railway/Render: Built-in metrics
